# 2023. 12. 12.

## Elasticsearch(7.10)

### 집계 - 버킷 집계

#### Histogram 집계

##### Offset

기본적으로 버킷 키는 0에서부터 시작하고 `interval`에 간격이 있어도 이어진다. 즉, 주기가 `10`이면 (데이터가 있는)처음 세 버킷은 `[0, 10)`, `[10, 20)`, `[20, 30)`이 된다. `offset` 옵션을 사용해 버킷 경계를 이동할 수 있다.

좋은 예시가 있다. 5에서 14 까지의 범위에 값을 가진 10 개의 도큐먼트가 있는 경우, 주기를 `10`으로 사용하면 각 버킷에 5개의 도큐먼트가 들어간다. 만약 추가로 오프셋을 `5`로 사용하면 하나의 버킷 `[5, 15)`에 10 개의 도큐먼트가 모두 들어간다.