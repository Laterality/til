# 2023. 12. 02.

## Elasticsearch(7.10)

### 집계 - 버킷 집계

#### Geohash grid 집계

##### 옵션

| 이름       | 설명                                                         |
| ---------- | ------------------------------------------------------------ |
| field      | 필수. GeoPoints로 인덱스된 필드명.                           |
| precision  | 선택사항. 결과의 셀/버킷을 정의하는 데 사용할 geohash의 문자열 길이. 기본값은 5이다. 정확도는 앞에서 언급한 정수 정확도 수준 중 하나로 정의할 수 있다. [1, 12] 외의 값은 거부된다. 대신, "1km", "10m"와 같이 근사치로 정확도 수준을 정할 수 있다. 이 경우 정확도 수준은 셀이 지정된 크기를 초과하지 않는 것으로 계산된다. 이 경우 정확도 수준이 지원되는 12 수준보다 높아질 수 있다(e.g. 거리가 5.6cm 미만인 경우). 이 경우 값은 거부된다. |
| bounds     | 선택사항. 버킷의 점을 필터링할 경계 상자.                    |
| size       | 선택사항. 반환할 geohash 버킷의 최대 수(기본값은 10,000). 결과가 잘리면 포함된 도큐먼트의 양에 따라 우선순위를 정한다. |
| shard_size | 선택사항. 최종 집계 결과에 반환되는 상위 셀을 더 정확하게 세기 위해 집계는 기본적으로 각 샤드에서 `max(1m,(size x number-of-shards))` 개의 버킷을 반환한다. 이 휴리스틱이 적절하지 않은 경우 이 파라미터를 사용해 각 샤드에서 반환할 수를 재정의할 수 있다. |