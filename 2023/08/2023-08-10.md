# 2023. 08. 10.

## Elasticsearch(7.10)

### 쿼리 DSL - 특화된 쿼리

#### Percolate 쿼리

##### 사용 예시

도큐먼트 퍼콜레이팅에는 다음 파라미터가 필요하다:

| 파라미터        | 설명                                                         |
| --------------- | ------------------------------------------------------------ |
| `field`         | 인덱스된 쿼리를 가진 `percolator` 타입 필드. 필수 파라미터.  |
| `name`          | 여러 `percolate` 쿼리를 지정한 경우 `_percolator_document_slot` 필드에 사용될 접미사. 이 파라미터는 선택사항이다. |
| `document`      | 퍼콜레이트되는 도큐먼트의 소스.                              |
| `documents`     | `document` 파라미터와 같지만 json 배열로 여러 도큐먼트를 받는다. |
| `document_type` | 퍼콜레이트되는 도큐먼트의 타입/매핑. 이 파라미터는 폐기 예정이며 Elasticsearch 8.0에서 제거될 것이다. |

도큐먼트의 소스를 지정하는 대신 이미 저장된 도큐먼트로부터 소스를 조회할 수 있다. `percolate` 쿼리는 그 다음 도큐먼트를 인출하는 GET 요청을 실행할 것이다.

이 경우 `document` 파라미터는 다음 파라미터로 대체할 수 있다:

| 파라미터     | 설명                                                         |
| ------------ | ------------------------------------------------------------ |
| `index`      | 도큐먼트가 위치한 인덱스. 필수 파라미터.                     |
| `type`       | 인출할 도큐먼트의 타입. 이 파라미터는 폐기 예정이며 Elasticsearch 8.0에서 제거될 것이다. |
| `id`         | 인출할 도큐먼트 ID. 필수 파라미터.                           |
| `routing`    | 선택 사항, 퍼콜레이트할 도큐먼트를 인출하는 데 사용할 라우팅. |
| `preference` | 선택 사항, 퍼콜레이트할 도큐먼트를 인출하는 데 사용할 설정.  |
| `version`    | 선택 사항, 인출되는 도큐먼트에 기대하는 버전.                |