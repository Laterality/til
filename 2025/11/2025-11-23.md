# 2025-11-23

## Envoy

### 아키텍처 개요

#### 기타 기능

##### IP 투명성

###### 원본 소스 리스너 필터

통제된 배포에서는 [원본 소스 리스너 필터][config-listeners-listener-filters-original-source]를 사용해 업스트림 커넥션에 다운스트림 원격 주소를 복제하는 것이 가능할 수 있다. 업스트림 요청이나 스트림에는 아무런 메타데이터도 추가되지 않는다. 그 보다는 업스트림 커넥션 자체가 다운스트림 원격 주소를 자신의 소스 주소로 수립된다. 이 필터는 어떤 업스트림 프로토콜이나 호스트와도 동작한다. 하지만 꽤 복잡한 구성이 필요하며 라우팅 제약사항으로 인해 모든 배포에서 지원되지는 않을 수 있다.

원본 소스 필터의 몇 가지 단점:

* Envoy가 다운스트림 원격 주소에 접근해야 한다.
* 구성이 상대적으로 복잡하다.
* 커넥션 풀링의 제한으로 인해 약간의 성능 손실이 발생할 수 있다.
* Windows에서는 지원되지 않는다.

[config-listeners-listener-filters-original-source]: https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/listener_filters/original_src_filter#config-listener-filters-original-src
