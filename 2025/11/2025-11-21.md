# 2025-11-21

## Envoy

### 아키텍처 개요

#### 기타 기능

##### IP 투명성

###### HTTP 헤더

HTTP 헤더는 [x-forwarded-for][config-http-http-connection-manager-http-header-manipulation-x-forwarded-for] 헤더에 요청의 원본 IP 주소를 나를 수 있다. 업스트림 서버는 이를 사용해 다운스트림 원격 주소를 결정할 수 있다. Envoy 또한 이 헤더를 사용해 [Original Src HTTP 필터][arch-other-features-ip-transparency-original-source-http-filter]에서 쓰이는 IP 주소를 선택할 수 있다.

HTTP 헤더 접근방식은 몇 가지 단점이 있다:

* HTTP에만 적용할 수 있다.
* 업스트림 호스트에서 지원되지 않을 수 있다.
* 구성에 주의가 필요하다.

[config-http-http-connection-manager-http-header-manipulation-x-forwarded-for]: https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/headers#config-http-conn-man-headers-x-forwarded-for
[arch-other-features-ip-transparency-original-source-http-filter]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/other_features/ip_transparency#arch-overview-ip-transparency-original-src-http
