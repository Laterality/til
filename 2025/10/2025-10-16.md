# 2025-10-16

## Envoy

### 아키텍처 개요

#### 보안

##### 외부 인가

###### 서비스 정의

트래픽의 컨텍스트는 여기 나열된 서비스 정의를 사용해 외부 인가 서비스에 전달된다. 인가 서비스에 전달되는 요청의 내용은 [CheckRequest][arch-security-external-authorization-authorization-service-check-request]에 의해 지정된다.

* [속성 컨텍스트][arch-security-external-authorization-attribute-context]
  * [service.auth.v3.AttributeContext][arch-security-external-authorization-attribute-context-attribute-context]
  * [service.auth.v3.AttributeContext.Peer][arch-security-external-authorization-attribute-context-attribute-context-peer]
  * [service.auth.v3.AttributeContext.Request][arch-security-external-authorization-attribute-context-attribute-context-request]
  * [service.auth.v3.AttributeContext.HttpRequest][arch-security-external-authorization-attribute-context-attribute-context-http-request]
  * [service.auth.v3.AttributeContext.TLSSession][arch-security-external-authorization-attribute-context-attribute-context-tls-session]
* [인가 서비스][arch-security-external-authorization-authorization-service]
  * [service.auth.v3.CheckRequest][arch-security-external-authorization-authorization-service-check-request]
  * [service.auth.v3.DeniedHttpResponse][arch-security-external-authorization-authorization-service-denied-http-response]
  * [service.auth.v3.OkHttpResponse][arch-security-external-authorization-authorization-service-ok-http-response]
  * [service.auth.v3.CheckResponse][arch-security-external-authorization-authorization-service-check-response]

[arch-security-external-authorization-authorization-service-check-request]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/external_auth.proto#envoy-v3-api-msg-service-auth-v3-checkrequest
[arch-security-external-authorization-attribute-context]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/attribute_context.proto
[arch-security-external-authorization-attribute-context-attribute-context]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/attribute_context.proto#service-auth-v3-attributecontext
[arch-security-external-authorization-attribute-context-attribute-context-peer]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/attribute_context.proto#service-auth-v3-attributecontext-peer
[arch-security-external-authorization-attribute-context-attribute-context-request]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/attribute_context.proto#service-auth-v3-attributecontext-request
[arch-security-external-authorization-attribute-context-attribute-context-http-request]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/attribute_context.proto#service-auth-v3-attributecontext-httprequest
[arch-security-external-authorization-attribute-context-attribute-context-tls-session]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/attribute_context.proto#service-auth-v3-attributecontext-tlssession
[arch-security-external-authorization-authorization-service]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/external_auth.proto
[arch-security-external-authorization-authorization-service-denied-http-response]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/external_auth.proto#service-auth-v3-deniedhttpresponse
[arch-security-external-authorization-authorization-service-ok-http-response]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/external_auth.proto#service-auth-v3-okhttpresponse
[arch-security-external-authorization-authorization-service-check-response]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/service/auth/v3/external_auth.proto#service-auth-v3-checkresponse
