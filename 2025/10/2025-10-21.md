# 2025-10-21

## Envoy

### 아키텍처 개요

#### 보안

##### 역할 기반 접근 제어

###### 조건

사전 정의된 권한과 주체 외에, 정책은 선택적으로 [공용 표현 언어(Common Expression Language)][cel-spec]로 작성된 인가 조건을 제공할 수 있다. 조건은 정책이 일치하기 위해 만족해야 하는 절(clause)을 명시한다. 예를 들어, 다음 조건은 요청 경로가 `/v1/`으로 시작하는지 검사한다:

```yaml
call_expr:
  function: startsWith
  args:
    - select_expr:
        operand:
          ident_expr:
            name: request
        field: path
    - const_expr:
        string_value: /v1/
```

정책을 표현하기 위해 Envoy는 몇 가지 [요청 속성][arch-advanced-attributes-request-attributes]을 제공한다. 대부분의 속성들은 선택사항이며 속성의 타입에 따라 기본값을 제공한다. CEL은 `has()` 구문을 사용해 요청 속성과 맵의 존재 여부를 확인할 수 있다, e.g., `has(request.referer)`.

[cel-spec]: https://github.com/google/cel-spec/blob/master/doc/intro.md
[arch-advanced-attributes-request-attributes]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/advanced/attributes#arch-overview-request-attributes
