# 2025-09-10

## Envoy

### 아키텍처 개요

#### 업스트림 클러스터

##### 아웃라이어 감지

###### 감지 유형

Envoy는 다음 아웃라이어 감지 유형을 지원한다:

**연속 지역 오리진 실패**

이 감지 유형은 [outlier_detection.split_external_local_origin_errors][api-clusters-outlier-detection-split-external-local-origin-errors]가 *true*이면 지역적으로 유래한 오류(타임아웃, 리셋 등)만 고려한다. 만약 Envoy가 업스트림 호스트에 반복적으로 연결할 수 없거나 업스트림 호스트와의 연결이 반복적으로 인터럽트되면 방출된다. TCP 리셋, ICMP 오류 등 지역적으로 유래한 다양한 문제들이 감지된다. 방출에 필요한 지역적으로 유래한 연속 실패의 횟수는 [outlier_detection.consecutive_local_origin_failure][api-clusters-outlier-detection-consecutive-local-origin-failure] 값으로 제어한다. 이 감지 유형은 [http 라우터][config-http-http-filters-router], [tcp 프록시][config-listeners-network-filters-tcp-proxy], [redis 프록시][config-listeners-network-filters-redis-proxy]에서 지원된다.

[api-clusters-outlier-detection-split-external-local-origin-errors]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/cluster/v3/outlier_detection.proto#envoy-v3-api-field-config-cluster-v3-outlierdetection-split-external-local-origin-errors
[api-clusters-outlier-detection-consecutive-local-origin-failure]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/cluster/v3/outlier_detection.proto#envoy-v3-api-field-config-cluster-v3-outlierdetection-consecutive-local-origin-failure
[config-http-http-filters-router]: https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/router_filter#config-http-filters-router
[config-listeners-network-filters-tcp-proxy]: https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/network_filters/tcp_proxy_filter#config-network-filters-tcp-proxy
[config-listeners-network-filters-redis-proxy]: https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/network_filters/redis_proxy_filter#config-network-filters-redis-proxy
