# 2025-09-21

## Envoy

### 아키텍처 개요

#### 관측성

##### 액세스 로그

[HTTP 커넥션 관리자][arch-http-http-connection-management], [tcp 프록시][arch-listeners-listener-filters-tcp-proxy-filter]와 [thrift 프록시][config-listeners-network-filters-thrift-proxy]는 다음 기능과 함께 광범위한 액세스 로그를 지원한다:

* 커넥션 스트림 별 복수의 액세스 로그
* 서로 다른 요청/응답 라우팅에 대한 커스터마이즈 가능한 액세스 로그 필터로 로그 분리
* 리스너 액세스 로그를 통한 독립적인 다운스트림 커넥션 로깅.

다운스트림 커넥션 액세스 로그는 [리스너 액세스 로그][api-listeners-listener-configuration-listener-access-log]를 사용해 활성화할 수 있다. 리스너 액세스 로그는 HTTP 요청 액세스 로깅을 보완하며 필터 액세스 로그와는 별개로 독립적으로 활성화할 수 있다.

기본적으로 액세스 로깅이 활성화된 경우, 각 UDP 세션, TCP 커넥션, HTTP 스트림의 끝에 로그가 구성된 싱크로 보내진다. 하지만 이 동작을 확장해 주기적으로 또는 UDP 세션, TCP 커넥션, HTTP 스트림의 시작에 액세스 로그를 보고하도록 확장할 수 있다. 업스트림 커넥션이나 요청의 시작에 액세스 로그를 생성하는 것은 주기적 로깅과는 관련 없으며, 그 반대도 마찬가지다.

[arch-http-http-connection-management]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/http_connection_management#arch-overview-http-conn-man
[arch-listeners-listener-filters-tcp-proxy-filter]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/listeners/listener_filters#arch-overview-tcp-proxy
[config-listeners-network-filters-thrift-proxy]: https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/network_filters/thrift_proxy_filter#config-network-filters-thrift-proxy
[api-listeners-listener-configuration-listener-access-log]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/listener/v3/listener.proto#envoy-v3-api-field-config-listener-v3-listener-access-log
