# 2025-09-09

## Envoy

### 아키텍처 개요

#### 업스트림 클러스터

##### 아웃라이어 감지

###### 감지 유형

Envoy는 다음 아웃라이어 감지 유형을 지원한다:

**연속 게이트웨이 실패**

([outlier_detection.split_external_local_origin_errors][api-clusters-outlier-detection-split-external-local-origin-errors]가 *false*인)기본 모드에서는 이 감지 유형이 "게이트웨이 오류"(502, 503, 504 상태 코드)로 불리는 5xx 오류의 일부와 타임아웃, TCP 리셋과 같은 지억 오리진 실패에 대응한다.

([outlier_detection.split_external_local_origin_errors][api-clusters-outlier-detection-split-external-local-origin-errors]가 *true*인)스플릿 모드에서는 이 감지 유형이 "게이트웨이 오류"(502, 503, 504 상태 코드)로 불리는 5xx 오류의 일부에 대응하며 [http 라우터][http-http-filters-router]에서만 지원된다.

업스트림 호스트가 몇 개의 연속된 "게이트웨이 오류"(502, 503, 504 상태 코드)를 반환하면 방출된다. 방출에 필요한 게이트웨이 연속 실패 횟수는 [outlier_detection.consecutive_gateway_failure][api-clusters-outlier-detection-consecutive-gateway-failure] 값으로 제어할 수 있다.


[api-clusters-outlier-detection-split-external-local-origin-errors]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/cluster/v3/outlier_detection.proto#envoy-v3-api-field-config-cluster-v3-outlierdetection-split-external-local-origin-errors
[http-http-filters-router]: https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/router_filter#config-http-filters-router
[api-clusters-outlier-detection-consecutive-gateway-failure]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/cluster/v3/outlier_detection.proto#envoy-v3-api-field-config-cluster-v3-outlierdetection-consecutive-gateway-failure
