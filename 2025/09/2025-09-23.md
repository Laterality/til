# 2025-09-23

## Envoy

### 아키텍처 개요

#### 관측성

##### 액세스 로그

###### 주기적 액세스 로그

**UDP 프록시**

UDP 프록시의 경우 [액세스 로그 플러시 주기][api-extensions-filters-udp-access-log-options-access-log-flush-interval]를 구성해 주기적 로깅을 활성화할 수 있다.

**TCP 프록시**

TCP 프록시의 경우 [액세스 로그 플러시 주기][api-extensions-filters-tcp-access-log-options-access-log-flush-interval]를 구성해 주기적 로깅을 활성화할 수 있다.

> [!NOTE]
>
> 첫 로그 엔트리는 업스트림 커넥션이 만들어졌는지와 관계 없이 새 커넥션을 수신한 뒤 한 주기 이후에 생성된다.

**HTTP 커넥션 관리자**

HTTP 커넥션 관리자의 경우 [액세스 로그 플러시 주기][api-extensions-filters-hcm-access-log-options-access-log-flush-interval]를 구성해 주기적 로깅을 활성화할 수 있다.

> [!NOTE]
>
> 첫 로그 엔트리는 업스트림 커넥션이 만들어졌는지와 관계 없이 HTTP 커넥션 관리자에 의해 새 HTTP 요청을 수신한 뒤 한 주기 이후에(필터 체인을 처리하기 전에) 생성된다.

**HTTP 라우터 필터**

라우터 필터의 경우 [업스트림 로그 플러시 주기][api-extensions-filters-upstream-access-log-options-upstream-log-flush-interval]를 구성해 주기적 로깅을 활성화할 수 있다.

> [!NOTE]
>
> 첫 로그 엔트리는 업스트림 커넥션이 만들어졌는지와 관계 없이 라우터 필터에 의해 새 HTTP 요청을 수신한 뒤 한 주기 이후에 만들어진다.

[api-extensions-filters-udp-access-log-options-access-log-flush-interval]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/udp/udp_proxy/v3/udp_proxy.proto#envoy-v3-api-field-extensions-filters-udp-udp-proxy-v3-udpproxyconfig-udpaccesslogoptions-access-log-flush-interval
[api-extensions-filters-tcp-access-log-options-access-log-flush-interval]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/network/tcp_proxy/v3/tcp_proxy.proto#envoy-v3-api-field-extensions-filters-network-tcp-proxy-v3-tcpproxy-tcpaccesslogoptions-access-log-flush-interval
[api-extensions-filters-hcm-access-log-options-access-log-flush-interval]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/network/http_connection_manager/v3/http_connection_manager.proto#envoy-v3-api-field-extensions-filters-network-http-connection-manager-v3-httpconnectionmanager-hcmaccesslogoptions-access-log-flush-interval
[api-extensions-filters-upstream-access-log-options-upstream-log-flush-interval]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/router/v3/router.proto#envoy-v3-api-field-extensions-filters-http-router-v3-router-upstreamaccesslogoptions-upstream-log-flush-interval
