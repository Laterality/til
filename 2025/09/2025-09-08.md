# 2025-09-08

## Envoy

### 아키텍처 개요

#### 업스트림 클러스터

##### 아웃라이어 감지

###### 감지 유형

Envoy는 다음 아웃라이어 감지 유형을 지원한다:

**연속 5xx**

([outlier_detection.split_external_local_origin_errors][]가 *false*인)기본 모드에서는 이 감지 유형이 지역적으로 및 외부에서 유래한 모든 생성된 오류에 대응한다.

> [!NOTE]
>
> [tcp 프록시][]나 [redis 프록시][]와 같은 비-HTTP 필터에서 생성된 오류는 HTTP 5xx 코드에 매핑되고 그렇게 처리된다.

([outlier_detection.split_external_local_origin_errors][]가 *true*인)스플릿 모드에서는 이 감지 유형이 지역적으로 유래한 오류는 무시하고 외부에서 생성된 (트랜잭션) 오류에만 대응한다. 업스트림 호스트가 HTTP 서버이면 5xx 유형의 오류만 대응한다(예외는 [Consecutive Gateway Failure][] 참고). [Redis 프록시를 통한][] Redis 서버의 경우 서버에서 손상된(malformed) 응답을 받은 경우에만 대응한다. 적절하게 형식화된 응답은 (인덱스를 찾지 못했거나 접근 거부 등)연산 오류를 담고 있더라도 고려하지 않는다.

업스트림 호스트가 5xx 유형의 오류로 취급될 만한 오류를 몇 번 반환하면 방출된다. 방출에 필요한 연속 5xx 횟수는 [outlier_detection.consecutive_5xx][] 값으로 제어한다.
