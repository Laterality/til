# 2025-07-23

## Envoy

### 아키텍처 개요

#### 업스트림 클러스터

##### 서비스 디스커버리

###### 지원되는 서비스 디스커버리 유형

**엔드포인트 디스커버리 서비스**

*엔드포인트 디스커버리* 서비스는 Envoy가 클러스터 멤버를 인출하는 데 사용하는 [gRPC 또는 REST-JSON API x버 서버 기반의 xDS 관리 서버][config-overview-xds-api-endpoints]이다. 클러스터 멤버는 Envoy 용어로 "엔드포인트"라 불린다. 각 클러스터에 대해 Envoy는 디스커버리 서비스로부터 엔드포인트를 인출한다. EDS는 몇 가지 이유로 선호되는 서비스 디스커버리 메커니즘이다:

* Envoy는 각 업스트림 호스트(vs. DNS로 리졸브된 로드 밸런서를 통한 라우팅)를 명시적으로 알고 있으며 더 똑똑한 로드 밸런싱 결정을 내릴 수 있다.
* 디스커버리 API 응답에서 전달된 각 호스트에 대한 추가 속성은 Envoy에게 호스트의 로드 밸런싱 가중치, 카나리 상태, 존 등을 알린다. 이 추가 속성들은 Envoy 메시에서 로드 밸런싱, 통계 수집 등에 전역적으로 쓰인다.

Envoy 프로젝트는 [Java][java-control-plane]와 [Go][go-control-plane]로 작성된 EDS와 [다른 디스커버리 서비스][arch-operations-and-configuration-xds-configuration-api-overview]의 레퍼런스 gRPC 구현을 제공한다.

[config-overview-xds-api-endpoints]: https://www.envoyproxy.io/docs/envoy/latest/configuration/overview/xds_api#config-overview-management-server
[arch-operations-and-configuration-xds-configuration-api-overview]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/operations/dynamic_configuration#arch-overview-dynamic-config
[java-control-plane]: https://github.com/envoyproxy/java-control-plane
[go-control-plane]: https://github.com/envoyproxy/go-control-plane