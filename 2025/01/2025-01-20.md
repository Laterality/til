# 2025. 01. 20.

## OpenID Connect Core 1.0

### 17. 개인정보 고려사항

#### 17.4. 오프라인 접근

오프라인 접근은 사용자가 부재중일 때 사용자가 있을 때 클레임을 전송하는 것보다 더 큰 개인정보 위험를 감수하고 클레임에 접근할 수 있게 한다. 따라서, 리소스에 대한 오프라인 접근에 대한 명시적 동의를 얻는 것이 중요하다. 이 명세는 요청이 이미 각 법 관할 내에서 요청을 처리하기 위한 조건을 만족한 것으로 알려진 게 아니라면 동의를 얻는 데 `prompt` 파라미터를 사용하는 것을 필수로 하고 있다.

묵시적 흐름이나 하이브리드 흐름을 사용해 사용자 에이전트를 통해 액세스 토큰이 반환되면, UserInfo 엔드포인트에 접근하는 데 사용할 수 있어 공격자에게 더 많은 위험이 노출된다. 액세스 토큰이 오프라인 접근을 가능케 하지 않으면 서버는 클라이언트 요청이 오프라인에서 만들어졌는지 온라인에서 만들어졌는지 구분해 대체로 위험을 구분할 수 있다. 따라서, 이 명세는 액세스 토큰이 사용자 에이전트를 통해 전송되면 오프라인 접근을 무시하는 것을 필수로 한다. 특히 네이티브 클라이언트에 대해 서버에서 온라인과 오프라인 접근을 구분하는 것은 어려울 수 있음을 참고하라. 서버는 휴리스틱에 의존해야 할 수 있다. 또한, 응답 타입 `code token`과 `token`에 대해 사용자 에이전트를 통해 전달된 액세스 토큰에 대한 노출 위험성도 같다. 그러므로, 구현체는 액세스 토큰이 사용자 에이전트를 통해 발급됐는지 또는 토큰 엔드포인트에서 직접 발급됐는지 구분할 준비를 하고 토큰이 사용자 에이전트를 통해 발급된 경우 오프라인 접근을 거부해야 한다.

이러한 규정은 `prompt` 파라미터를 통한 명시적 동의를 요구하지만, 사용자가 "동의" 버튼 등을 누른 것만으로 유효한 동의를 구성할 수 없을 것이다. 개발자는 동의 행위가 유효하도록 신경써야 한다. 주로, 최종 사용자가 약관의 영향을 이해하고, 동의는 강요가 아닌 자유(i.e., 다른 선택지가 있어야 한다)이며, 약관이 공정해야 한다. 온라인 셀프 서비스의 "명시적 동의"는 종종 일부 관할에서 유효한 동의 형식을 갖추지 않기 때문에, 일반적으로, 서비스는 각 관할 내에 요구되는 개인정보 원칙을 따르고 단순히 명시적 동의를 요청하는 대신 처리를 위한 다른 조건에 의존하는 것을 권장한다.