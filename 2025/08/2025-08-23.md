# 2025-08-23

## Envoy

### 아키텍처 개요

#### 업스트림 클러스터

##### 로드밸런싱 - 오버프로비저닝 지수

우선순위 수준과 지역성은 [이 퍼센티지][api-extensions-endpoint-policy-overprovisioning-factor]로 오버프로비저닝된 것으로 간주한다. Envoy는 가용 호스트의 비율을 오버프로비저닝 지수에 곱한 값이 100 아래로 떨어지기 전까지 우선순위 수준이나 지역성이 비가용 상태인 것으로 간주하지 않는다. 기본값은 140(퍼센티지로는 140%)이므로, 우선순위 수준이나 지역성은 가용 엔드포인트의 비율이 72% 아래로 내려가기 전까지는 비가용한 것으로 간주하지 않는다.

[api-extensions-endpoint-policy-overprovisioning-factor]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/endpoint/v3/endpoint.proto#envoy-v3-api-field-config-endpoint-v3-clusterloadassignment-policy-overprovisioning-factor