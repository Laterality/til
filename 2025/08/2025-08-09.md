# 2025-08-09

## Envoy

### 아키텍처 개요

#### 업스트림 클러스터

##### 커넥션 풀링

###### 헬스 체크 상호작용

Envoy에 능동적 또는 수동적 [헬스 체크][arch-upstream-clusters-health-checking]가 구성되면 가용(available) 상태에서 비가용(unavailable) 상태로 전환하는 호스트를 대신해 모든 커넥션 풀 커넥션을 닫는다. 호스트가 로드 밸런싱 로테이션에 다시 진입하면 새 커넥션을 생성해 (ECMP 라우트 등으로 인한)잘못된 흐름을 해소할 가능성을 최대화한다.

[arch-upstream-clusters-health-checking]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/health_checking#arch-overview-health-checking