# 2025-12-21

## Envoy

### 아키텍처 개요

#### 고급

##### 제네릭 일치

###### 일치 API

**동작 일치**

일치자 프레임워크의 동작은 일반적으로 이름으로 선택된 리소스를 참조한다.

네트워크 필터 체인 일치는 다음 확장을 지원한다:

- [형식 문자열 동작][api-common-substitution-format-string]은 커넥션 동적 메타데이터와 자신의 필터 상태로부터 필터 체인 이름을 계산한다. 예시:

    ```yaml
    action:
      name: foo
      typed_config:
        "@type": type.googleapis.com/envoy.config.core.v3.SubstitutionFormatString
        text_format_source:
          inline_string: "%DYNAMIC_METADATA(com.test_filter:test_key)%"
    ```

**동작 일치**

이 동작들은 일치자와 함께 사용할 수 있다:

- 전송 소켓 이름 동작 - 클러스터의 transport_socket_matches 구성에서 일치 조건에 따라 명명된 전송 소켓을 선택한다.

[api-common-substitution-format-string]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/core/v3/substitution_format_string.proto#envoy-v3-api-msg-config-core-v3-substitutionformatstring
