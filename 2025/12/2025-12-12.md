# 2025-12-12

## Envoy

### 아키텍처 개요

#### 고급

##### 속성(attributes)

###### 응답 속성

응답 속성은 요청이 완료된 이후에만 사용 가능하다.

`response.*` 속성은 http 필터에서만 사용할 수 있다.

| 속성                     | 타입                | 설명                                                                     |
| ------------------------ | ------------------- | ------------------------------------------------------------------------ |
| response.code            | int                 | 응답 HTTP 상태 코드                                                      |
| response.code_detail     | string              | 내부 응답 코드 상세(변경한 대상)                                         |
| response.flags           | int                 | 비트 벡터로 인코딩된 표준 응답 코드 이상의 응답에 대한 추가 상세 정보    |
| response.grpc_status     | int                 | 응답 gRPC 상태 코드                                                      |
| response.headers         | map<string, string> | 소문자로 치환된(lower-cased) 헤더 이름으로 인덱스된 전체 응답 헤더       |
| response.header_bytes    | int                 | 응답 헤더의 총 바이트 크기                                               |
| response.trailers        | map<string, string> | 소문자로 치환된 트레일러 이름으로 인덱스된 전체 응답 트레일러            |
| response.size            | int                 | 응답 본문 크기                                                           |
| response.total_size      | int                 | 압축되지 않은 헤더와 트레일러 크기의 근사치를 포함한 전체 응답 크기      |
| response_backend_latency | duration            | 업스트림으로 첫 바이트가 보내진 뒤 마지막 바이트를 수신할 때 까지의 기간 |
