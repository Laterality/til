# 2025-12-28

## Envoy

### 아키텍처 개요

#### 고급

##### Wasm

Envoy는 Wasm 플러그인 실행을 지원한다. 어느 모듈이 커스텀 확장 로직을 구현할 수 있는 확장 인터페이스를 정의하는 [Proxy-Wasm 명세][proxy-wasm-spec]에 따라 작성된 Wasm 모듈이다. 현재 [Proxy-Wasm ABI (Application Binary Interface) 버전 0.2.1][proxy-wasm-spec-0-2-1]이 권장된다. Wasm은 다양한 언어([C++][proxy-wasm-cpp-sdk], [Rust][proxy-wasm-rust-sdk])로부터 한 번만 컴파일되고 어디서든 실행되도록 이식 가능하고 경량 바이너리 실행 가능 형식을 제공한다. Wasm 모듈을 만들고 배포하는 방법은 [sandbox 예제][sandboxes-wasm-cpp-filter]를 참고하라.

Envoy는 Wasm 플러그인이 실행될 수 있는 몇 가지 확장 지점을 제공한다:

- [HTTP][api-extensions-filters-http-filters-wasm] 필터로서
- [네트워크 수준 (L4) 필터][api-extensions-filters-network-filters-wasm]로서
- [StatsSink][api-extensions-stat-sinks-wasm]로서
- [AccessLogger][api-extensions-access-loggers-wasm-access-log]로서
- [백그라운드 서비스][api-extensions-wasm-wasm-service]로서

Envoy가 Wasm 플러그인에 호출하는 구체적인 함수들은 구성된 확장 지점에 따라 다르다.

[proxy-wasm-spec]: https://github.com/proxy-wasm/spec
[proxy-wasm-spec-0-2-1]: https://github.com/proxy-wasm/spec/tree/main/abi-versions/v0.2.1
[proxy-wasm-cpp-sdk]: https://github.com/proxy-wasm/proxy-wasm-cpp-sdk
[proxy-wasm-rust-sdk]: https://github.com/proxy-wasm/proxy-wasm-rust-sdk
[sandboxes-wasm-cpp-filter]: https://www.envoyproxy.io/docs/envoy/latest/start/sandboxes/wasmcc#install-sandboxes-wasm-filter
[api-extensions-filters-http-filters-wasm]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/wasm/v3/wasm.proto#envoy-v3-api-msg-extensions-filters-http-wasm-v3-wasm
[api-extensions-filters-network-filters-wasm]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/network/wasm/v3/wasm.proto#envoy-v3-api-msg-extensions-filters-network-wasm-v3-wasm
[api-extensions-stat-sinks-wasm]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/stat_sinks/wasm/v3/wasm.proto#envoy-v3-api-msg-extensions-stat-sinks-wasm-v3-wasm
[api-extensions-access-loggers-wasm-access-log]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/access_loggers/wasm/v3/wasm.proto#envoy-v3-api-msg-extensions-access-loggers-wasm-v3-wasmaccesslog
[api-extensions-wasm-wasm-service]: https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/wasm/v3/wasm.proto#envoy-v3-api-msg-extensions-wasm-v3-wasmservice
