## 2021. 11. 29.

### RFC7519 - JSON Web Token

#### 7. JWT 생성과 유효성 검증(1)

##### 7.1. JWT 생성

JWT 생성하기 위해 다음의 단계를 수행한다. 각 단계의 입력과 출력 사이에 의존성이 없는 경우 순서는 중요하지 않다.

1. 필요한 클레임을 갖는 JWT 클레임 셋을 만든다. 공백은 암묵적으로 허용되며 인코딩 전에 정규화(canonicalization)은 필요 없다는 점을 알아두자.
2. 메시지를 JWT 클레임 셋의 UTF-8 표현의 옥텟으로 만든다.
3. 필요한 헤더 파라미터 집합을 갖는 JOSE 헤더를 만든다. JWT는 [JWS]나 [JWE] 명세 중 하나를 **따라야 한다**. 공백은 암묵적으로 허용되며 인코딩 전에 정규화는 필요 없다는 점을 알아두자.
4. JWT가 JWS인지 JWE인지에 따라 두 가지 경우가 있다:
   * JWT가 JWS인 경우, 메시지를 JWS 페이로드로 사용하여 JWS를 만든다. JWS 생성에 대해서는 [JWS]에 명시된 모든 단계를 **따라야 한다**.
   * 그 외에 JWT가 JWE인 경우, 메시지를 JWE에 대한 평문으로 사용하여 JWE를 만든다. JWE 생성에 대해서는 [JWE]에 명시된 모든 단계를 **따라야 한다**.
5. 중첩된 서명이나 암호화 연산이 수행된 경우, 해당 단계에서 만들어진 새 JOSE 헤더의 "cty" (content type) 값을 "JWT"로 사용하여 메시지를 JWS나 JWE로 만들고 3단계로 돌아간다.
6. 그 외의 경우 결과 JWT를 JWS나 JWE로 만든다.

##### 