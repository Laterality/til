# 2026-01-19

## Envoy

### 요청의 생명주기

#### 요청 흐름

##### 5. HTTP/2 코덱 디코딩

Envoy의 HTTP/2 코덱은 [nghttp2][nghttp2]를 기반으로 한다. (네트워크 필터 체인 변환 이후)TCP 커넥션의 평문 바이트와 함께 HCM에 의해 호출된다. 코덱은 바이트 스트림을 일련의 HTTP/2 프레임으로 디코드하고 커넥션을 여러 독립된 HTTP 스트림들로 디멀티플렉스한다. 스트림 멀티플렉싱은 HTTP/2의 핵심 기능으로, HTTP/1에 비해 상당한 성능적 이점을 제공한다. 각 HTTP 스트림은 하나의 요청과 응답을 담당한다.

코덱은 HTTP/2 설정 프레임과 스트림 및 커넥션 수준에 대한 [흐름 제어][envoy-docs-flow-control]에 대한 책임도 갖는다.

코덱은 HTTP 커넥션의 세부 사항을 추상화하고 요청/응답 헤더/본문/트레일러를 가진 스트림으로 분할된 HTTP 커넥션 관리자와 커넥션의 HTTP 필터 체인에 표준 뷰를 제공하는 책임을 갖는다. 이는 프로토콜이 HTTP/1, HTTP/2, HTTP/3인지에 상관없이 참이다.

[nghttp2]: https://nghttp2.org/
[envoy-docs-flow-control]: https://github.com/envoyproxy/envoy/blob/e45201c87d8481ecd72299139102d9ebf049cf75/source/docs/flow_control.md
