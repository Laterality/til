# 2026-01-21

## Envoy

### 요청의 생명주기

#### 요청 흐름

##### 7. 로드 밸런싱

각 클러스터는 새 요청이 도착하면 엔드포인트를 선정하는 [로드 밸런서][arch-upstream-clusters-load-balancing]를 갖는다. Envoy는 가중치 라운드 로빈, 최소 부하, 무작위 등 다양한 로드 밸런싱 알고리즘을 지원한다. 로드 밸런서는 정적 부트스트랩 구성, DNS, 동적 xDS(CDS와 EDS 디스커버리 서비스) 및 능동/수동 헬스 체크의 조합으로부터 효과적인 배정(assignment)을 얻는다. 로드 밸런싱의 동작에 대한 더 자세한 내용은 [로드 밸런싱 문서][arch-upstream-clusters-load-balancing]를 참고하라.

엔드포인트가 선택되면 이 엔드포인트에 대한 [커넥션 풀][arch-upstream-clusters-connection-pooling]이 요청을 포워드할 커넥션을 찾는 데 쓰인다. 만일 호스트에 대한 커넥션이 존재하지 않거나 모든 커넥션이 최대 동시 스트림 제한에 도달한 경우, 클러스터에 대한 최대 커넥션에 대한 서킷 브레이커에 걸리지 않는 한 새 커넥션이 수립되고 커넥션 풀에 들어간다. 커넥션에 대한 최대 수명 스트림 제한이 구성되고 이에 도달한 경우, 풀에서 새 컨멕션이 할당되고 HTTP/2 커넥션이 드레인되는 데 영향을 준다. 클러스터에 대한 최대 동시 요청과 같은 다른 서킷 브레이커 또한 검사된다. 더 자세한 내용은 [서킷 브레이커][arch-upstream-clusters-circuit-breaking]와 [커넥션 풀][arch-upstream-clusters-connection-pooling]을 참고하라.

[arch-upstream-clusters-load-balancing]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/overview#arch-overview-load-balancing
[arch-upstream-clusters-connection-pooling]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/connection_pooling#arch-overview-conn-pool
[arch-upstream-clusters-circuit-breaking]: https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/circuit_breaking#arch-overview-circuit-break
