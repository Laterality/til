## 2020. 08. 26.

### Spring Cloud Bus(5)

#### 서비스 ID는 유니크해야 한다

버스는 이벤트 처리를 제거하기 위해 두 번 시도한다. 한 번은 원본 `ApplicationEvent`로부터, 또 한 번은 큐로부터 처리한다. 이를 위해 보내는 서비스 ID와 현재 서비스 ID를 확인한다. 만일 여러 서비스 인스턴스가 같은 ID를 가지면 이벤트가 처리되지 않는다. 로컬 머신에서 실행할 때는 각 서비스가 다른 포트에 있고, 포트가 ID의 일부이다. Cloud Foundry는 인덱스를 제공한다. Cloud Foundry 외부에서 이 ID가 유니크함을 보장하려면 `spring.application.index`에 서비스의 인스턴스마다 유니크한 값을 설정해야 한다.

