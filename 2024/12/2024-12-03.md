# 2024. 12. 03.

## OpenID Connect Core 1.0

### 11. 오프라인 접근

OpenID Connect는 오프라인 접근을 요청하기 위해 다음 `scope` 값을 정의한다:

* offline_access

  **선택사항**. 이 스코프 값은 최종 사용자가 (로그인하지 않은)존재하지 않을 때에도 최종 사용자의 UserInfo 엔드포인트에 대한 접근을 허용하는 액세스 토큰을 얻는 데 사용할 수 있는 OAuth 2.0 리프레시 토큰을 요청한다.

오프라인 접근이 요청되면 요청된 리소스에 대한 접근을 허용하는 요청을 처리할 다른 조건이 아닌 한 `prompt` 파라미터에 `consent` 값이 **사용돼야 한다**. OP는 요청된 리소스에 대한 오프라인 접근을 가능하게 하는 리프레시 토큰을 반환하는 것에 대한 동의를 항상 **얻어야 한다**. 이전에 저장된 사용자 동의는 오프라인 접근을 허용하기에 항상 충분하지 않다.

`offline_access` 값을 가진 스코프 파라미터의 수신자에 따라, 인가 서버는:

* 요청된 리소스에 대한 오프라인 접근을 허용하는 요청을 처리할 다른 조건이 아닌 한 `prompt` 파라미터가 `consent`인지 **확인해야 한다**. 이 조건들 중 하나 또는 둘 다 만족되지 않으면 `offline_access` 요청을 **무시해야 한다**.
* 클라이언트가 인가 코드가 반환되는 `response_type` 값을 사용중이지 않으면 `offline_access` 요청을 **무시해야 한다**.
* 등록된 `application_type`이 `web`인 경우 명시적으로 오프라인 접근에 대한 동의를 받거나 가지고 **있어야 한다**.
* 등록된 `application_type`이 `native`인 경우 명시적으로 오프라인 접근에 대한 동의를 받거나 가지고 **있는 것이 좋다**.

리프레시 토큰의 사용은 `offline_access` 유스 케이스에만 한정되지 않는다. 인가 서버는 이 명세의 범위를 벗어나는 다른 상황에서 리프레시 토큰을 **승인할 수 있다**.



