# 2024. 10. 12.

## OpenID Connect Core 1.0

### 3. 인증

#### 3.3. 하이브리드 흐름을 사용한 인증

##### 3.3.3. 토큰 엔드포인트

###### 3.3.3.6. ID Token

하이브리드 흐름을 사용중일 때, 이 섹션에 명시된 차이점을 제외하고 [섹션 3.3.2.11][oidc-core-section-3-3-2-11]에 정의된대로 토큰 엔드포인트에서 반환된 ID Token의 내용은 인가 엔드포인트에서 반환된 ID Token과 동일하다.

`response_type` 값이 `code id_token`이거나 `code id_token token`으로 ID Token이 인가 엔드포인트와 토큰 엔드포인트 양쪽에서 반환된 경우, `iss`와 `sub` 클레임 값은 두 ID Token에서 **같아야 한다**. 두 곳 중 한 곳에 존재하는 인증 이벤트에 관한 모든 클레임은 다른 한쪽에도 **존재하는 것이 좋다**. 한 쪽의 ID Token이 최종 사용자에 관한 클레임을 가지면 두 곳 모두에 같은 값으로 클레임이 **존재하는 것이 좋다**. 예를 들어, 개인 정보를 이유로 OP가 인가 엔드포인트에서 최종 사용자에 관해 더 적은 수의 클레임을 반환하는 것을 **택할 수도 있음**을 참고하라. 토큰 엔드포인트에서 반환된 ID Token과 액세스 토큰 값은 토큰 엔드포인트에서 수행된 TLS 암호화에 의해 암호학적으로 함께 바운드돼 있기 때문에  `at_hash`와 `c_hash` 클레임은 인가 엔드포인트에서 반환된 ID Token에는 존재하더라도 토큰 엔드포인트에서 반환된 ID Token에는 **생략될 수 있다**.



[oidc-core-section-3-3-2-11]: https://openid.net/specs/openid-connect-core-1_0.html#HybridIDToken