# 2024. 05. 08.

## Elasticsearch(7.10)

### 집계 - 파이프라인 집계

#### Moving function 집계

##### shift 파라미터

기본적으로(`shift = 0`) 계산에 전달되는 윈도우는 현재 버킷을 제외한 마지막 `n`개 값이다. `shift`를 1 증가시키면 윈도우 시작 위치가 오른쪽으로 `1`씩 이동한다.

* 윈도우에 현재 버킷을 포함시키려면 `shift = 1`을 사용한다.
* 가운데 정렬(버킷 앞과 뒤에 `n / 2`개 값이 위치)에는 `shift = window / 2`을 사용한다.
* 오른쪽 정렬(현재 버킷의 `n`개 값 뒤)에는 `shift = window`를 사용한다.

윈도우 가장자리가 데이터 시리즈의 경계 바깥으로 이동하면 윈도우는 사용 가능한 값만 갖도록 줄어든다.

