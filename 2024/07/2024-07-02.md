# 2024. 07. 02.

## OpenID Authentication 2.0 - Final

### 9. 인증 요청

#### 9.2. 렐름(Realm)

"렐름"(realm)은 OpenID 인증 요청이 유효한 URL 공간의 일부를 나타내는 패턴이다. 렐름은 최종 사용자에게 인증 요청의 범위(scope)를 나타내기 위해 설계됐다. OP는 인증 요청에 대한 최종 사용자의 승인을 요청할 때 렐름을 제시하는 **것이 좋다**. 예를 들어, OP는 최종 사용자가 인증 요청의 승인을 자동화할 수 있게 하는 데 사용할 **수 있다**.

렐름 패턴은 다음 변경을 따르는 URL이다:

* 렐름은 URI 프래그먼트를 가져**선 안된다**.
* 렐름은 URL authority 섹션의 시작에 와일드 카드를 포함할 **수 있다**. 와일드 카드는 "*"문자로 구성돼 URL의 authority 섹션 앞에서 DNS 이름 앞에 추가된다.

다음의 경우 URL은 렐름에 일치한다:

* URL 스킴과 URL의 포트가 렐름의 것과 같다. URI 일치에 관한 규칙은 [RFC3986][rfc-3986]의 섹션 3.1을 참고하라.
* URL의 경로가 렐름의 경로의 서브 디렉터리와 일치하거나 같다.
* 다음 중 하나:
  1. 렐름의 도메인이 와일드 카드 문자"\*."를 포함하고, URL의 도메인의 그 뒷부분이 렐름의 "\*."의 뒷부분과 동일하거나 
  2. URL의 도메인이 렐름의 도메인과 동일하다.

존재할 때 "openid.return_to" URL은 "openid.realm"에 일치해**야 한다**. 그렇지 않으면 OP가 [간접 오류 응답][oidc-indirect-error-response]을 반환해**야 한다**.

OP들은 http://\*.com/이나 http://\*.co.uk와 같이 과도하게 일반적인 렐름으로 어설션을 만드는 것으로부터 자신의 사용자를 보호하는 것을 **권장한다**. 과도하게 일반적인 렐름은 렐름이 특정 신뢰 당사자를 식별하는 데 사용될 경우 위험할 수 있다. 렐름이 과도하게 일반적인지의 여부는 OP의 재량이다.



[rfc-3986]: https://www.rfc-editor.org/rfc/rfc3986.html