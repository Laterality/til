# 2024. 01. 08.

## Elasticsearch(7.10)

### 집계 - 버킷 집계

#### Significant terms 집계

##### 커스텀 배경 집합

보통, 도큐먼트 전경(foreground) 집합은 인덱스의 모든 배경 집합에 대한 "차이"(diffed)다. 하지만 때로는 비교에 대한 기준으로 더 좁은 배경 집합을 사용하는 것이 유용할 수 있다. 예를 들어, 전 세계에 관한 내용이 담긴 인덱스에서 "Madrid"와 관련된 도큐먼트를 쿼리하면 "Spanish"가 중요 텀이라는 것이 드러날 수 있다. 이는 사실이지만 더 초점이 맞춰진 텀을 원한다면 텀 *spain*에 대한 `background_filter`를 사용해 더 좁은 도큐먼트 집합을 컨텍스트로 설정할 수 있다. 이를 배경으로 하면 "Spanish"는 흔하게 되므로 "capital"처럼 Madrid와 더 강하게 관련된 단어처럼 중요하지는 않을 것이다. 배경 필터를 사용하면 더 느려진다. 각 텀의 배경 빈도를 인덱스에 미리 계산된 텀 별 카운트를 읽는 대신 필터링 포스팅 리스트로부터 필요할 때 만들어낸다.